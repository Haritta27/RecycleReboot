<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List of Submissions</title>
      <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
    <h1>Recycling Form</h1>
  </header> 
  <br><br>
    
    <div id="documentList"></div>

    <script src="https://cdn.jsdelivr.net/npm/appwrite@13"></script>
    <script>

    	const { Client, Databases } = Appwrite;
        const client = new Client();
    
        client
        .setEndpoint('https://cloud.appwrite.io/v1')
        .setProject('6627d17a708b0b4549c9');

        const databases = new Databases(client);
        
        //const promise = databases.listDocuments('[DATABASE_ID]', '[COLLECTION_ID]');
        const promise = databases.listDocuments('6627d48b11903bca0210', '6627d4a497ca264a5c78');

        /*
        const promise = fetch('https://cloud.appwrite.io/v1/databases/6627d48b11903bca0210/collections/6627d4a497ca264a5c78/documents', {
            method: 'GET',
            mode: 'no-cors' // Set the mode to 'no-cors'
        });        
        */
        const documentList = document.getElementById('documentList');
        
        promise.then(function (response) {
            // Success
            documentList.innerHTML = ''; // Clear previous content

            /*
            response.documents.forEach(function(document) {
                const docDiv = document.createElement('div');
                docDiv.textContent = JSON.stringify(document);
                documentList.appendChild(docDiv);
            });
            */
            
            const documents = response.documents; // Assuming response.documents is an array

            for (let i = 0; i < documents.length; i++) {
              const document = documents[i];
              const docDiv = document.createElement('div');
              docDiv.textContent = JSON.stringify(document);
              documentList.appendChild(docDiv);
            }
            
        }, function (error) {
            // Failure
            console.log(error);
        });
    </script>
</body>
</html>
